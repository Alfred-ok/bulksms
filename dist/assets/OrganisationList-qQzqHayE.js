import{r,L as R,j as e,T as z,U as $,a2 as G,W as H,w as h,p as T,X as k,Y as V,Z as J,_ as l,ac as W,ad as X,ae as K,af as o,ag as Y,ah as d,ai as Z,aj as y,a8 as q,ak as Q,aa as ee,a9 as se,a4 as m,C as te}from"./react-vendors-zvsUqyxL.js";import{L as ae,M as re}from"./vendor-BDCZ_RMd.js";import{o as oe}from"./icons8-organization-96-B_a_TVRs.js";function ce(){const[x,D]=r.useState([]),[g,u]=r.useState(!1),[E,O]=r.useState(),[L,b]=r.useState(!1),[I,C]=r.useState(!1),[P,f]=r.useState([]),[_,M]=r.useState(""),[i,j]=r.useState(1),p=10,v=i*p,N=v-p,w=P.slice(N,v),U=s=>{const t=s.target.value.toLowerCase();M(t);const c=x.filter(B=>B.org_Name.toLowerCase().includes(t));f(c)},[a,n]=r.useState({id:"",orgName:"",smsCost:"",accessKey:"",apiKey:"",groupID:"",clientId:""}),S=R();r.useEffect(()=>{C(!1);try{fetch("https://wazimobile-sms-backend.onrender.com/get_organisation").then(s=>s.json()).then(s=>{console.log(s),D(s),f(s),C(!0)}).catch(s=>{console.log(s),C(!0)})}catch(s){console.error("There was a problem with the fetch operation:",s)}},[]);const F=async s=>{s.preventDefault();const t=a.id;console.log(E),b(!0);try{const c=await fetch(`https://wazimobile-sms-backend.onrender.com/update-organisation/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_Name:a.orgName,smsCost:a.smsCost,accessKey:a.accessKey,apiKey:a.apiKey,groupID:a.groupID,clientId:a.clientId})});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`)}catch(c){console.error("There was a problem with the fetch operation:",c)}b(!1),S(0),u(!g)};r.useEffect(()=>{F()},[]);const A=async s=>{console.log(s);try{fetch(`https://wazimobile-sms-backend.onrender.com/get_organisation/${s}`).then(t=>t.json()).then(t=>{console.log(t),n({...a,id:t.id,orgName:t.org_Name,smsCost:t.smsCost,accessKey:t.accessKey,apiKey:t.apiKey,groupID:t.groupID,clientId:t.clientId})}).catch(t=>{console.log(t)})}catch(t){console.error("There was a problem with the fetch operation:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(z,{style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)",marginBottom:"30px",backgroundColor:"rgba(255,255,255,0.7)"},children:e.jsxs($,{children:[e.jsxs(G,{style:{padding:"15px",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx(H,{src:oe,height:48,style:{marginRight:"8px"}}),"Organisations"]}),e.jsxs(h,{color:"primary",onClick:()=>S("/organistion-registeration"),children:[e.jsx(T,{icon:ae,style:{marginRight:"5px"}}),"Register New Organisation"]})]}),I&&I?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mb-3",children:e.jsxs(V,{className:"mb-3",style:{width:"60%"},children:[e.jsx(J,{id:"basic-addon1",color:"dark",style:{color:"#fff",backgroundColor:"rgb(71, 71, 212)"},children:"Search"}),e.jsx(l,{type:"text",id:"searchInput",placeholder:"Search by Organisation Name",value:_,onChange:U,style:{borderColor:"rgb(71, 71, 212)"}})]})}),e.jsxs(W,{responsive:!0,small:!0,stripedColumns:!0,bordered:!0,children:[e.jsx(X,{children:e.jsxs(K,{color:"dark",style:{textAlign:"center"},children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Organisation Code"}),e.jsx(o,{scope:"col",children:"Organisation Name"}),e.jsx(o,{scope:"col",children:"Sender Id"}),e.jsx(o,{scope:"col",children:"Sms Cost"}),e.jsx(o,{scope:"col",children:"Group Id"}),e.jsx(o,{scope:"col"})]})}),w&&w.map((s,t)=>e.jsx(Y,{children:e.jsxs(K,{style:{textAlign:"center"},children:[e.jsx(o,{scope:"row",children:N+t+1}),e.jsx(d,{children:s.org_Code}),e.jsx(d,{children:s.org_Name}),e.jsx(d,{children:s.url}),e.jsx(d,{children:s.smsCost}),e.jsx(d,{children:s.groupID}),e.jsx(d,{children:e.jsxs(h,{color:"primary",onClick:()=>{u(!g),O(s.id),A(s.id)},style:{display:"flex",alignItems:"center",margin:"0 auto"},children:[e.jsx(T,{icon:re,style:{marginRight:"5px"}})," Update"]})})]})},s.id))]}),e.jsxs(Z,{"aria-label":"Page navigation example",children:[e.jsx(y,{onClick:()=>j(i-1),disabled:i===1,children:"Previous"}),[...Array(Math.ceil(x.length/p))].map((s,t)=>e.jsx(y,{active:t+1===i,onClick:()=>j(t+1),children:t+1},t+1)),e.jsx(y,{onClick:()=>j(i+1),disabled:i===Math.ceil(x.length/p),children:"Next"})]})]}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"end",color:"black",width:"100%",marginTop:"30px"},children:[e.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"}),e.jsx("h3",{style:{marginLeft:"20px"},children:"Loading"})]})]})}),e.jsxs(q,{backdrop:"static",visible:g,onClose:()=>u(!1),"aria-labelledby":"StaticBackdropExampleLabel",children:[e.jsx(Q,{children:e.jsx(ee,{id:"StaticBackdropExampleLabel",children:"Update"})}),e.jsx(se,{children:e.jsxs(k,{onSubmit:F,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Organisation Name"}),e.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Organisation Name",onChange:s=>n({...a,orgName:s.target.value}),value:a.orgName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Sms Cost"}),e.jsx(l,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter The Sms Cost",onChange:s=>n({...a,smsCost:s.target.value}),value:a.smsCost})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Access Key"}),e.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Access Key",onChange:s=>n({...a,accessKey:s.target.value}),value:a.accessKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Api Key"}),e.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Api Key",onChange:s=>n({...a,apiKey:s.target.value}),value:a.apiKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Group Id"}),e.jsx(l,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter Group Id",onChange:s=>n({...a,groupID:s.target.value}),value:a.groupID})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"exampleFormControlInput1",children:"Client Id"}),e.jsx(l,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Client Id",onChange:s=>n({...a,clientId:s.target.value}),value:a.clientId,clientId:!0})]}),e.jsx("div",{className:"col-auto",style:{width:"100%"},children:L?e.jsxs(h,{color:"success",type:"submit",className:"mb-3",disabled:!0,style:{width:"100%"},children:[e.jsx(te,{as:"span",size:"sm"})," Updating information ..."]}):e.jsx(h,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%"},children:"UPDATE"})})]})})]})]})}export{ce as default};
