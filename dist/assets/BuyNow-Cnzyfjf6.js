import{r as o,L as b,j as s,M as j,Q as y,T as I,U as S,a2 as v,V as F,p as f,X as N,a4 as t,a0 as U,_ as n,w}from"./react-vendors-zvsUqyxL.js";import{A as B}from"./index-K0m3Hw1Q.js";import{k as _,u as k}from"./vendor-BDCZ_RMd.js";function E(){const i=_.get("groupId"),[a,m]=o.useState([]),[r,h]=o.useState(),[l,p]=o.useState(),[c,u]=o.useState(),{purchaseSmsUnit:D,setPurchaseSmsUnit:d}=o.useContext(B),x=b();o.useEffect(()=>{try{fetch(`https://wazimobile-sms-backend.onrender.com/org_group_id/${i}`).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),m(e)}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[]),o.useEffect(()=>{try{fetch(`https://wazimobile-sms-backend.onrender.com/get_organisation/${l}`).then(e=>e.json()).then(e=>{console.log(e),h({balance:e.balance,smsCost:e.smsCost,sms_Units:e.sms_Units,accessKey:e.accessKey,apiKey:e.apiKey,clientId:e.clientId,groupID:e.groupID,mbcode:e.mbcode,org_Code:e.org_Code,org_Name:e.org_Name,token:e.token,url:e.url})}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[l]);const C=e=>{e.preventDefault(),d({price:r.smsCost,quantity:c}),x("/price")};return s.jsx(s.Fragment,{children:s.jsx(j,{children:s.jsx(y,{xs:9,style:{margin:"0px auto"},children:s.jsx(I,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:s.jsxs(S,{children:[s.jsx(v,{children:s.jsxs(F,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[s.jsx(f,{icon:k,className:"flex-shrink-0 me-2",width:34,height:34}),s.jsx("div",{children:s.jsx("h3",{children:"Buy Sms"})})]})}),s.jsxs(N,{onSubmit:C,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Select Sender ID"}),s.jsxs(U,{id:"exampleFormControlInput1","aria-label":"Default select example",value:l,onChange:e=>p(e.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[s.jsx("option",{value:"",children:"Select Sender Id"})," ",a&&a.map((e,g)=>s.jsx("option",{value:e.id,children:e.url},g))]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Sms Balance"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Sms Balance",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:r&&r.balance})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Sms Units Balance"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Sms Units Balance",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:r&&r.sms_Units})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Price in Ksh"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Price in Ksh",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:r&&r.smsCost})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(t,{htmlFor:"exampleFormControlInput1",children:"Purchase Sms Units"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Purchase Sms Units",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:c,onChange:e=>u(e.target.value),required:!0})]}),s.jsx("div",{className:"col-auto",children:s.jsx(w,{color:"primary",type:"submit",className:"mb-3",children:"SUBMIT"})})]})]})})})})})}export{E as default};
