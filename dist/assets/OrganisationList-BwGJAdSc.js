import{r as l,Q as F,j as e,W as w,X as K,a3 as S,Z as T,w as p,p as j,ad as D,ae as E,af as y,ag as t,ah as k,ai as n,a9 as O,aj as _,ab as U,aa as A,_ as B,a5 as i,a1 as c,C as M}from"./react-vendors-Df_ma0qF.js";import{J as R,K as $}from"./vendor-DYGqKupJ.js";import{o as z}from"./icons8-organization-96-B_a_TVRs.js";function G(){const[x,b]=l.useState(),[m,h]=l.useState(!1),[I,f]=l.useState(),[v,g]=l.useState(!1),[o,a]=l.useState({id:"",orgName:"",smsCost:"",accessKey:"",apiKey:"",groupID:"",clientId:""}),u=F();l.useEffect(()=>{try{fetch("https://wazimobile-sms-backend.onrender.com/get_organisation").then(s=>s.json()).then(s=>{console.log(s),b(s)}).catch(s=>{console.log(s)})}catch(s){console.error("There was a problem with the fetch operation:",s)}},[]);const C=async s=>{s.preventDefault();const r=o.id;console.log(I),g(!0);try{const d=await fetch(`https://wazimobile-sms-backend.onrender.com/update-organisation/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_Name:o.orgName,smsCost:o.smsCost,accessKey:o.accessKey,apiKey:o.apiKey,groupID:o.groupID,clientId:o.clientId})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`)}catch(d){console.error("There was a problem with the fetch operation:",d)}g(!1),u(0),h(!m)};l.useEffect(()=>{C()},[]);const N=async s=>{console.log(s);try{fetch(`https://wazimobile-sms-backend.onrender.com/get_organisation/${s}`).then(r=>r.json()).then(r=>{console.log(r),a({...o,id:r.id,orgName:r.org_Name,smsCost:r.smsCost,accessKey:r.accessKey,apiKey:r.apiKey,groupID:r.groupID,clientId:r.clientId})}).catch(r=>{console.log(r)})}catch(r){console.error("There was a problem with the fetch operation:",r)}};return e.jsxs(e.Fragment,{children:[e.jsx(w,{style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)",marginBottom:"30px",backgroundColor:"rgba(255,255,255,0.7)"},children:e.jsxs(K,{children:[e.jsxs(S,{style:{padding:"15px",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx(T,{src:z,height:48,style:{marginRight:"8px"}}),"Organisations"]}),e.jsxs(p,{color:"primary",onClick:()=>u("/organistion-registeration"),children:[e.jsx(j,{icon:R,style:{marginRight:"5px"}}),"Register New Organisation"]})]}),e.jsxs(D,{responsive:!0,small:!0,stripedColumns:!0,bordered:!0,children:[e.jsx(E,{children:e.jsxs(y,{color:"dark",style:{textAlign:"center"},children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Organisation Code"}),e.jsx(t,{scope:"col",children:"Organisation Name"}),e.jsx(t,{scope:"col",children:"Sender Id"}),e.jsx(t,{scope:"col",children:"Sms Cost"}),e.jsx(t,{scope:"col",children:"Group Id"}),e.jsx(t,{scope:"col"})]})}),x&&x.map((s,r)=>e.jsx(k,{children:e.jsxs(y,{style:{textAlign:"center"},children:[e.jsx(t,{scope:"row",children:r+1}),e.jsx(n,{children:s.org_Code}),e.jsx(n,{children:s.org_Name}),e.jsx(n,{children:s.url}),e.jsx(n,{children:s.smsCost}),e.jsx(n,{children:s.groupID}),e.jsx(n,{children:e.jsxs(p,{color:"primary",onClick:()=>{h(!m),f(s.id),N(s.id)},style:{display:"flex",alignItems:"center",margin:"0 auto"},children:[e.jsx(j,{icon:$,style:{marginRight:"5px"}})," Update"]})})]})},s.id))]})]})}),e.jsxs(O,{backdrop:"static",visible:m,onClose:()=>h(!1),"aria-labelledby":"StaticBackdropExampleLabel",children:[e.jsx(_,{children:e.jsx(U,{id:"StaticBackdropExampleLabel",children:"Update"})}),e.jsx(A,{children:e.jsxs(B,{onSubmit:C,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"exampleFormControlInput1",children:"Organisation Name"}),e.jsx(c,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Organisation Name",onChange:s=>a({...o,orgName:s.target.value}),value:o.orgName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"exampleFormControlInput1",children:"Sms Cost"}),e.jsx(c,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter The Sms Cost",onChange:s=>a({...o,smsCost:s.target.value}),value:o.smsCost})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"exampleFormControlInput1",children:"Access Key"}),e.jsx(c,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Access Key",onChange:s=>a({...o,accessKey:s.target.value}),value:o.accessKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"exampleFormControlInput1",children:"Api Key"}),e.jsx(c,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Api Key",onChange:s=>a({...o,apiKey:s.target.value}),value:o.apiKey})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"exampleFormControlInput1",children:"Group Id"}),e.jsx(c,{type:"number",id:"exampleFormControlInput1",placeholder:"Enter Group Id",onChange:s=>a({...o,groupID:s.target.value}),value:o.groupID})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"exampleFormControlInput1",children:"Client Id"}),e.jsx(c,{type:"text",id:"exampleFormControlInput1",placeholder:"Enter Client Id",onChange:s=>a({...o,clientId:s.target.value}),value:o.clientId,clientId:!0})]}),e.jsx("div",{className:"col-auto",style:{width:"100%"},children:v?e.jsxs(p,{color:"success",type:"submit",className:"mb-3",disabled:!0,style:{width:"100%"},children:[e.jsx(M,{as:"span",size:"sm"})," Updating information ..."]}):e.jsx(p,{color:"primary",type:"submit",className:"mb-3",style:{width:"100%"},children:"UPDATE"})})]})})]})]})}export{G as default};
