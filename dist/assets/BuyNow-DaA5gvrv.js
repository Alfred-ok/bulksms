import{r as t,Q as g,j as s,T as b,U as j,W as y,X as S,a4 as I,Y as v,p as F,_ as f,a6 as o,a2 as N,a1 as n,w as U}from"./react-vendors-EQJ1DewU.js";import{A as w}from"./index-BwovoiXw.js";import{u as B}from"./vendor-DmCBWs0o.js";function P(){const[a,c]=t.useState([]),[r,m]=t.useState(),[l,h]=t.useState(),[i,p]=t.useState(),{purchaseSmsUnit:_,setPurchaseSmsUnit:d}=t.useContext(w),x=g();t.useEffect(()=>{try{fetch("https://wazimobile-sms-backend.onrender.com/get_organisation").then(e=>e.json()).then(e=>{console.log(e),c(e)}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[]),t.useEffect(()=>{try{fetch(`https://wazimobile-sms-backend.onrender.com/get_organisation/${l}`).then(e=>e.json()).then(e=>{console.log(e),m({balance:e.balance,smsCost:e.smsCost,sms_Units:e.sms_Units,accessKey:e.accessKey,apiKey:e.apiKey,clientId:e.clientId,groupID:e.groupID,mbcode:e.mbcode,org_Code:e.org_Code,org_Name:e.org_Name,token:e.token,url:e.url})}).catch(e=>{console.log(e)})}catch(e){console.error("There was a problem with the fetch operation:",e)}},[l]);const u=e=>{e.preventDefault(),d({price:r.smsCost,quantity:i}),x("/price")};return s.jsx(s.Fragment,{children:s.jsx(b,{children:s.jsx(j,{xs:9,style:{margin:"0px auto"},children:s.jsx(y,{className:"mb-4",style:{boxShadow:"0px 15px 34px 0px rgba(0,0,0,0.2)"},children:s.jsxs(S,{children:[s.jsx(I,{children:s.jsxs(v,{color:"primary",variant:"solid",className:"d-flex align-items-center",xs:10,children:[s.jsx(F,{icon:B,className:"flex-shrink-0 me-2",width:34,height:34}),s.jsx("div",{children:s.jsx("h3",{children:"Buy Sms"})})]})}),s.jsxs(f,{onSubmit:u,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(o,{htmlFor:"exampleFormControlInput1",children:"Select Sender ID"}),s.jsxs(N,{id:"exampleFormControlInput1","aria-label":"Default select example",value:l,onChange:e=>h(e.target.value),style:{borderColor:"rgba(71, 71, 212,0.6)"},children:[s.jsx("option",{value:"",children:"Select Sender Id"})," ",a&&a.map((e,C)=>s.jsx("option",{value:e.id,children:e.url},C))]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(o,{htmlFor:"exampleFormControlInput1",children:"Sms Balance"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Sms Balance",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:r&&r.balance})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(o,{htmlFor:"exampleFormControlInput1",children:"Sms Units Balance"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Sms Units Balance",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:r&&r.sms_Units})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(o,{htmlFor:"exampleFormControlInput1",children:"Price in Ksh"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Price in Ksh",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:r&&r.smsCost})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx(o,{htmlFor:"exampleFormControlInput1",children:"Purchase Sms Units"}),s.jsx(n,{type:"text",id:"exampleFormControlInput1",placeholder:"Purchase Sms Units",style:{borderColor:"rgba(71, 71, 212,0.6)"},value:i,onChange:e=>p(e.target.value),required:!0})]}),s.jsx("div",{className:"col-auto",children:s.jsx(U,{color:"primary",type:"submit",className:"mb-3",children:"SUBMIT"})})]})]})})})})})}export{P as default};
